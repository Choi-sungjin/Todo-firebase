<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
  <title>í• ì¼</title>
  <link rel="icon" type="image/png" href="/favicon.png" />
  <link rel="shortcut icon" type="image/png" href="/favicon.png" />
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>

  <!-- í—¤ë” -->
  <header class="header">
    <div class="header-top">
      <div>
        <p class="header-date" id="header-date"></p>
        <h1 class="header-title">ë‚˜ì˜ í• ì¼</h1>
      </div>
      <button class="add-fab" id="open-modal">ï¼‹</button>
    </div>

    <!-- íƒ­: ì „ì²´ / ì˜¤ëŠ˜ -->
    <div class="tab-group">
      <button class="tab active" data-tab="all">ì „ì²´</button>
      <button class="tab" data-tab="today">ì˜¤ëŠ˜</button>
    </div>
  </header>

  <!-- í• ì¼ ëª©ë¡ -->
  <main class="todo-list" id="todo-list">
    <div class="empty-state" id="empty-state">
      <p>ğŸ‰</p>
      <p>í• ì¼ì´ ì—†ì–´ìš”!</p>
    </div>
    <div id="todo-list-cards"></div>
  </main>

  <!-- â”€â”€â”€â”€â”€ ìŠ¤ì¼€ì¤„ ì°¨íŠ¸ ì„¹ì…˜ â”€â”€â”€â”€â”€ -->
  <section class="schedule-section" id="nav-schedule">
    <div class="schedule-header">
      <h2 class="schedule-title">ğŸ“… ì „ì²´ ì¼ì •</h2>
      <div class="month-nav">
        <button id="prev-month">â€¹</button>
        <span id="current-month-label"></span>
        <button id="next-month">â€º</button>
      </div>
    </div>
    <div class="schedule-chart" id="schedule-chart"></div>
  </section>

  <!-- í• ì¼ ì¶”ê°€ ëª¨ë‹¬ -->
  <div class="modal-overlay hidden" id="modal-overlay">
    <div class="modal" id="modal">
      <div class="modal-handle"></div>
      <h2 class="modal-title" id="modal-title">ìƒˆ í• ì¼</h2>
      <div class="form-group">
        <label>í• ì¼</label>
        <div class="input-wrapper">
          <input type="text" id="todo-input" placeholder="ë¬´ì—‡ì„ í•´ì•¼ í•˜ë‚˜ìš”?" autocomplete="off" />
          <ul class="autocomplete-list hidden" id="autocomplete-list"></ul>
        </div>
      </div>
      <div class="template-suggestion hidden" id="template-suggestion">
        <span>ğŸ’¡</span>
        <span id="template-name"></span>
        <button id="apply-template">ì ìš©</button>
      </div>
      <div class="form-row">
        <div class="form-group half">
          <label>ì¹´í…Œê³ ë¦¬</label>
          <select id="category-select">
            <option value="">ì—†ìŒ</option>
            <option value="ì—…ë¬´">ğŸ’¼ ì—…ë¬´</option>
            <option value="ê±´ê°•">ğŸƒ ê±´ê°•</option>
            <option value="í•™ìŠµ">ğŸ“š í•™ìŠµ</option>
            <option value="ìƒí™œ">ğŸ  ìƒí™œ</option>
          </select>
        </div>
        <div class="form-group half">
          <label>ìš°ì„ ìˆœìœ„</label>
          <select id="priority-select">
            <option value="medium">ë³´í†µ</option>
            <option value="high">ë†’ìŒ ğŸ”´</option>
            <option value="low">ë‚®ìŒ ğŸŸ¢</option>
          </select>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group half">
          <label>ì‹œì‘ì¼</label>
          <input type="date" id="start-date-input" />
        </div>
        <div class="form-group half">
          <label>ë§ˆê°ì¼</label>
          <input type="date" id="deadline-input" />
        </div>
      </div>
      <div class="subtask-suggestion hidden" id="subtask-suggestion">
        <label>ğŸ“Œ ì¶”ì²œ ì„¸ë¶€ ì‘ì—…</label>
        <div class="subtask-chips" id="subtask-chips"></div>
      </div>
      <div class="form-group">
        <label>ë©”ëª¨</label>
        <textarea id="memo-input" placeholder="ì¶”ê°€ ë©”ëª¨ë¥¼ ì…ë ¥í•˜ì„¸ìš”" rows="2"></textarea>
      </div>
      <div class="modal-actions">
        <button class="btn-cancel" id="close-modal">ì·¨ì†Œ</button>
        <button class="btn-add" id="add-btn">ì¶”ê°€í•˜ê¸°</button>
      </div>
    </div>
  </div>

  <!-- Firebase Realtime Database -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
    import {
      getDatabase,
      ref,
      set,
      push,
      onValue,
      remove,
      update,
      goOnline
    } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDe6wQl7i3kwD0jPMPUP97KGfQuiPh5u8I",
      authDomain: "aif-todo-backend.firebaseapp.com",
      databaseURL: "https://aif-todo-backend-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "aif-todo-backend",
      storageBucket: "aif-todo-backend.firebasestorage.app",
      messagingSenderId: "968012722020",
      appId: "1:968012722020:web:316e9d0cb3bcbe4d35d471",
      measurementId: "G-S85KYGSHDK"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    goOnline(db);

    window._db = db;
    window._ref = ref;
    window._set = set;
    window._push = push;
    window._onValue = onValue;
    window._remove = remove;
    window._update = update;

    const script = document.createElement("script");
    script.src = "js/suggest.js";
    document.body.appendChild(script);
  </script>

</body>
</html>
